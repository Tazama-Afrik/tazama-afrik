<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Countries | Tazama Afrik</title>
  <script src="https://code.jquery.com/jquery-3.5.0.js"></script> <!--For Allowing JQuery---->
</head>



<link rel="stylesheet" href="../static/css/styles.css">
<link rel="stylesheet" href="../static/css/countries.css">
<link rel='shortcut icon' href="../static/img/tazama_afrik.png">
<div class="topnav" id="navtop">
  <a class="home" href="../homepage.html"><img src="../static/img/tazama.jpg" alt="Home"></a>
  <a class="nav active" href="../html/countries.html">Countries</a>
  <a class="nav" href="../html/beaches.html">Beaches</a>
  <a class="nav" href="../html/culture.html">Culture</a>
  <a class="nav" href="../html/reserves.html">Reserves</a>
  <a class="nav" href="../html/restaurants.html">Restaurants</a>

	    <!------     BEGINNING OF COUNTRIES LIST -------->
        <ul class="nav-list">
          <li>
            <h4>Select a country in Africa&nbsp;&nbsp;</h4>
          </li>
          <li>
            <select id="breed"></select>
          </li>
        </ul>
	    <!------     END OF COUNTRIES LIST ------->
    </div>
<body>

  <div class="container">
    <img id="main" class="container" src="" alt="main viewer" />
	<span id="loader" class="loading show" style="font-family: monospace;">üåçLoading...</span>
  </div>


  
  <script>
      const main = document.getElementById("main");
const loader = document.getElementById("loader");
const breedSelect = document.getElementById("breed");

async function init() {
  // populate breed list
  const res = await fetch("https://dog.ceo/api/breeds/list/all");
  const resJson = await res.json();

  let breedOptions = "<option></option>";

  let breedList = Object.keys(resJson.message);

  for (let i = 0; i < breedList.length; i++) {
    breedOptions += `<option value=${breedList[i]}>${breedList[i]}</option>`;
  }

  breedSelect.innerHTML = breedOptions;

  // get first image
  const randomRes = await fetch("https://dog.ceo/api/breeds/image/random");
  const randomResJson = await randomRes.json();

  main.src = randomResJson.message;

  // add event listeners
  breedSelect.addEventListener("change", handleBreedChange);

  main.addEventListener("load", function() {
    main.classList.add("show");
    loader.classList.remove("show");
  });
}

async function handleBreedChange(event) {
  const breed = event.target.value;

  main.classList.remove("show");
  loader.classList.add("show");

  const res = await fetch(`https://dog.ceo/api/breed/${breed}/images/random`);
  const resJson = await res.json();

  main.src = resJson.message;
}

init();

  </script>
</body>

</html>