<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Countries | Tazama Afrik</title>
  <script src="https://code.jquery.com/jquery-3.5.0.js"></script> <!--For Allowing JQuery---->
  <link rel="stylesheet" href="//code.jquery.com/ui/1.13.1/themes/base/jquery-ui.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.css" integrity="sha512-aOG0c6nPNzGk+5zjwyJaoRUgCdOrfSDhmMID2u4+OIslr0GjpLKo7Xm0Ao3xmpM4T8AmIouRkqwj1nrdVsLKEQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="/resources/demos/style.css">
  <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
  <script src="https://code.jquery.com/ui/1.13.1/jquery-ui.js"></script>
  <link rel="stylesheet" href="../css/styles.css"/>
  <link rel="stylesheet" href="../css/countries.css"/>
  <link rel='shortcut icon' href="../img/tazama_afrik.png"/>
  <div class="topnav" id="navtop">
    <a class="home" href="../homepage.html"><img src="../img/tazama.jpg" alt="Home"></a>
    <a class="nav active" href="../html/countries.html">Countries</a>
    <a class="nav" href="../html/beaches.html">Beaches</a>
    <a class="nav" href="../html/culture.html">Culture</a>
    <a class="nav" href="../html/reserves.html">Reserves</a>
    <a class="nav" href="../html/restaurants.html">Restaurants</a>
      <div id="select">Show countries</div>
  </div>
</head>


<body>

	    <!------     BEGINNING OF COUNTRIES LIST -------->
      <container id="display">
      <div id="accordion">
        <h3>Western Africa</h3>
        <div class="list">
          <h2 id="WA"></h2>
          <center> <div id="west"><span class="loading show"> üåç </span></div></center>
        </div>
        <h3>Southern Africa</h3>
        <div class="list">
          <h2 id="SA"></h2>
          <center> <div id="south" ><span class="loading">üåç</span></div></center>
        </div>
        <h3>Northern Africa</h3>
        <div class="list">
          <h2 id="NA"></h2>
          <center> <div id="north"><span class="loading">üåç</span></div></center>
        </div>
        <h3>Central Africa</h3>
        <div class="list">
          <h2 id="CA"></h2>
          <center> <div id="central"><span class="loading">üåç</span></div></center>
        </div>
        <h3>Eastern Africa</h3>
        <div class="list">
          <h2 id="EA"></h2>
          <center> <div id="east"><span class="loading">üåç</span></div></center>
        </div>
      </div>
	    <!------     END OF COUNTRIES LIST ------->

      <main class="body">
        <h1 id="title"> <img src="https://flagcdn.com/h40/ng.png" alt="Flag"/></h1>
      
      
      The Country Details Shows Here!
      </main>
    </container>
    <div class="counter">
      Counted:
    </div>
</body>

<!-------------------------Javascript below ------------------------------------->
  <script>
  $( function() {
//     if !($('#accordion').css('display', 'none')) {
//   $('#display').css('grid-template-columns', '1fr 100%')
// } else {
//   $('#display').css('grid-template-columns', '100%')
// }
    $( "#accordion" ).accordion();
  } );
  $("#select").click(function(){
  $("#accordion").slideToggle();
});

  $(function (){
    $.ajax({
      url: 'https://restcountries.com/v3.1/subregion/west',
      success: function(data){
        $country = $('#west')
        $title = $('#WA')
        console.log(data)
        let num = 0;
        $.each(data, function(i, item){
          if ( item.region === 'Africa' ) { 
          $country.append('<li class="country">'+ item.name.common +'</li>')
          num += 1;
          }
        });

        $title.prepend(`${num} Countries`)
      },
      // error: alert('Hey, There was an error. Check the URL and try again')
    });
    $.ajax({
      url: 'https://restcountries.com/v3.1/subregion/south',
      success: function(data){
        $country = $('#south')
        $title = $('#SA')
        console.log(data)
        let num = 0;
        $.each(data, function(i, item){
          if ( item.region === 'Africa' ) { 
            $country.append('<li class="country">'+ item.name.common +'</li>')
          num += 1;
          }
        });

        $title.prepend(`${num} Countries`)
      },
      // error: alert('Hey, There was an error. Check the URL and try again')
    });
    $.ajax({
      url: 'https://restcountries.com/v3.1/subregion/north',
      success: function(data){
        $country = $('#north')
        $title = $('#NA')
        console.log(data)
        let num = 0;
        $.each(data, function(i, item){
          if ( item.region === 'Africa' ) { 
            $country.append('<li class="country">'+ item.name.common +'</li>')
            $('.body').append(item.flag)
            
          num += 1;
          }
        });

        $title.prepend(`${num} Countries`)
      },
      // error: alert('Hey, There was an error. Check the URL and try again')
    });
    $.ajax({
      url: 'https://restcountries.com/v3.1/subregion/central',
      success: function(data){
        $country = $('#central')
        $title = $('#CA')
        let num = 0;
        $.each(data, function(i, item){
          // if ( item.region === 'Africa' ) { 
        console.log(data)
        $country.append('<li class="country">'+ item.name.common +'</li>')
          num += 1;
          // }
        });

        $title.prepend(`${num} Countries`)
      },
      // error: alert('Hey, There was an error. Check the URL and try again')
    });
    $.ajax({
      url: 'https://restcountries.com/v3.1/subregion/east',
      success: function(data){
        $country = $('#east')
        $title = $('#EA')
        let num = 0;
        $.each(data, function(i, item){
          if ( item.region === 'Africa' ) { 
            console.log(data)
            $country.append('<li class="country">'+ item.name.common +'</li>')
          num += 1;
          }
        });

        $title.prepend(`${num} Countries`)
      },
      // error: alert('Hey, There was an error. Check the URL and try again')
    });
  });
  // if ($('#accordion').css('display', 'none')) {
  //   $('#display').css('grid-template-columns', '1fr 80%')
  // } else {
  //   $('#display').css('grid-template-columns', '80%')
  // }

  $('.country').ready( function () {
    $('.loading').removeClass('show');
    $('.country').addClass('show');
  });
  $('.country').click( function() {
    $('#title').prepend(item.name.common)
  });
  //////////////////////////// Counting The Page Visits///////////////////////////////

  function visits() {
    var checkCounts = document.querySelector(".counter");
    let count = localStorage.getItem("page_view");
    if (count) {
    count = Number(count) + 1;
    localStorage.setItem("page_view", count);
    } else {
      count = 1;
      localStorage.setItem("page_view", 1);
    }
    message = `Number Of Visits: ${count}`;
    checkCounts.innerHTML = message;
  }
  visits();
</script>

</html>