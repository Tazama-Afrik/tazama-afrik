<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Countries | Tazama Afrik</title>
  <script src="https://code.jquery.com/jquery-3.5.0.js"></script> <!--For Allowing JQuery---->
  <link rel="stylesheet" href="//code.jquery.com/ui/1.13.1/themes/base/jquery-ui.css">
  <link rel="stylesheet" href="http://jqueryui.com/resources/demos/style.css">
  <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
  <script src="https://code.jquery.com/ui/1.13.1/jquery-ui.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@300&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../css/styles1.css"/>
  <link rel="stylesheet" href="../css/countries.css"/>
  <link rel='shortcut icon' href="../img/tazama_afrik.png"/>
  <div class="topnav" id="navtop">
    <a class="home" href="../index.html"><img src="../img/tazama.jpg" alt="Home"></a>
    <a class="nav active" href="countries.html">Countries</a>
    <a class="nav" href="beaches.html">Beaches</a>
    <a class="nav" href="culture.html">Culture</a>
    <a class="nav" href="reserves.html">Reserves</a>
    <a class="nav" href="cuisine.html">Restaurants</a>
      <div id="select">Hide Countries</div>
  </div>
</head>

<body>
	    <!------     BEGINNING OF COUNTRIES LIST -------->
    <div id="display">
      <div id="accordion">
        <h3>Western Africa</h3>
        <div class="list">
          <h2 id="WA"></h2>
          <center> <div id="west"><span class="loading show"> üåç </span></div></center>
        </div>
        <h3>Southern Africa</h3>
        <div class="list">
          <h2 id="SA"></h2>
          <center> <div id="south" ><span class="loading">üåç</span></div></center>
        </div>
        <h3>Northern Africa</h3>
        <div class="list">
          <h2 id="NA"></h2>
          <center> <div id="north"><span class="loading">üåç</span></div></center>
        </div>
        <h3>Central Africa</h3>
        <div class="list">
          <h2 id="CA"></h2>
          <center> <div id="central"><span class="loading">üåç</span></div></center>
        </div>
        <h3>Eastern Africa</h3>
        <div class="list">
          <h2 id="EA"></h2>
           <div id="east"><span class="loading">üåç</span></div>
        </div>
      </div>
	    <!------     END OF COUNTRIES LIST ------->

      <main class="body">
        <h1 id="title" style="font-size:150%">Country And Flag</h1>
      <div class="data" style="font-family:sans-serif; color: darkblue; font-weight: bolder; font-size: 70%;">
        Official Name: Connect to the internet | Population: Connect to the internet | Subregion: Connect to the internet</div>
      
      <p style="text-align: left;">Lorem ipsum dolor, sit amet consectetur adipisicing elit. Dignissimos, nobis tempora cumque quisquam eligendi ratione quis repudiandae harum quia, voluptatibus neque expedita recusandae consequuntur voluptatum non cum inventore iusto nulla similique laboriosam delectus nesciunt. Voluptatum odio assumenda rem quasi asperiores porro hic ducimus aspernatur tempora minus debitis accusantium ab voluptate, eius harum fugiat quae veniam deleniti architecto temporibus magnam perferendis at doloremque! Fugiat, ipsa ea aliquid dolorum modi quibusdam voluptatibus!</p>
      <p style="text-align: left;">Lorem ipsum dolor, sit amet consectetur adipisicing elit. Dignissimos, nobis tempora cumque quisquam eligendi ratione quis repudiandae harum quia, voluptatibus neque expedita recusandae consequuntur voluptatum non cum inventore iusto nulla similique laboriosam delectus nesciunt. Voluptatum odio assumenda rem quasi asperiores porro hic ducimus aspernatur tempora minus debitis accusantium ab voluptate, eius harum fugiat quae veniam deleniti architecto temporibus magnam perferendis at doloremque! Fugiat, ipsa ea aliquid dolorum modi quibusdam voluptatibus!</p>
      <p style="text-align: left;">Lorem ipsum dolor, sit amet consectetur adipisicing elit. Dignissimos, nobis tempora cumque quisquam eligendi ratione quis repudiandae harum quia, voluptatibus neque expedita recusandae consequuntur voluptatum non cum inventore iusto nulla similique laboriosam delectus nesciunt. Voluptatum odio assumenda rem quasi asperiores porro hic ducimus aspernatur tempora minus debitis accusantium ab voluptate, eius harum fugiat quae veniam deleniti architecto temporibus magnam perferendis at doloremque! Fugiat, ipsa ea aliquid dolorum modi quibusdam voluptatibus!</p>
      <p style="text-align: left;">Lorem ipsum dolor, sit amet consectetur adipisicing elit. Dignissimos, nobis tempora cumque quisquam eligendi ratione quis repudiandae harum quia, voluptatibus neque expedita recusandae consequuntur voluptatum non cum inventore iusto nulla similique laboriosam delectus nesciunt. Voluptatum odio assumenda rem quasi asperiores porro hic ducimus aspernatur tempora minus debitis accusantium ab voluptate, eius harum fugiat quae veniam deleniti architecto temporibus magnam perferendis at doloremque! Fugiat, ipsa ea aliquid dolorum modi quibusdam voluptatibus!</p>
      <p style="text-align: left;">Lorem ipsum dolor, sit amet consectetur adipisicing elit. Dignissimos, nobis tempora cumque quisquam eligendi ratione quis repudiandae harum quia, voluptatibus neque expedita recusandae consequuntur voluptatum non cum inventore iusto nulla similique laboriosam delectus nesciunt. Voluptatum odio assumenda rem quasi asperiores porro hic ducimus aspernatur tempora minus debitis accusantium ab voluptate, eius harum fugiat quae veniam deleniti architecto temporibus magnam perferendis at doloremque! Fugiat, ipsa ea aliquid dolorum modi quibusdam voluptatibus!</p>
      <p style="text-align: left;">Lorem ipsum dolor, sit amet consectetur adipisicing elit. Dignissimos, nobis tempora cumque quisquam eligendi ratione quis repudiandae harum quia, voluptatibus neque expedita recusandae consequuntur voluptatum non cum inventore iusto nulla similique laboriosam delectus nesciunt. Voluptatum odio assumenda rem quasi asperiores porro hic ducimus aspernatur tempora minus debitis accusantium ab voluptate, eius harum fugiat quae veniam deleniti architecto temporibus magnam perferendis at doloremque! Fugiat, ipsa ea aliquid dolorum modi quibusdam voluptatibus!</p>
      <div class="counter">
        Counted:
      </div>
    </main>
    </div>
    
</body>

<!-------------------------Javascript below ------------------------------------->
  <script>
  $( function() {
    $( "#accordion" ).accordion();
      $("#select").click(function(){
        $("#accordion").slideToggle();
        if ($('#select').text() == 'Show Countries') {
          $('#select').text('Hide Countries')
        } else {
          $('#select').text('Show Countries')
        }
      });
  });

  $.ajax({
      url: `https://restcountries.com/v3.1/name/nigeria`,
      success: function(data) {
        data[0].flag = `<img src="https://flagcdn.com/h40/${data[0].cca2.toLowerCase()}.png"/>`
        countryName = 'NIGER';
        data = data[0];
        $('#title').html(''+countryName+' '+ data.flag +'');
        $('.data').html("Official Name: <u>"+data.name.official+"</u> | Population: <u>"+data.population+"</u> | Region: <u>"+data.subregion+
        "</u><br> Curency: <u>"+data.name.common+"'s Currency</u> | Languages: <u>"+data.languages[0]+"</u>")
      }
    });

  $(function (){
    $.ajax({
      url: 'https://restcountries.com/v3.1/subregion/west',
      success: function(data){
        $country = $('#west')
        $number = $('#WA')
        let num = 0;
        $.each(data, function(i, item){
          if ( item.region === 'Africa' ) { 
            $country.append('<li class="country">'+ item.name.common +'</li>')
            num += 1;
          }
        });

        $number.append(`${num} Countries`);
        $('.country').click(clicked);
      },
      // error: alert('Hey, There was an error. Check the URL and try again')
    });
    $.ajax({
      url: 'https://restcountries.com/v3.1/subregion/south',
      success: function(data){
        $country = $('#south')
        $number = $('#SA')
        let num = 0;
        $.each(data, function(i, item){
          if ( item.region === 'Africa' ) { 
            $country.append('<li class="country">'+ item.name.common +'</li>')
          num += 1;
          }
        });

        $number.prepend(`${num} Countries`);
        $('.country').click(clicked);
      },
      // error: alert('Hey, There was an error. Check the URL and try again')
    });
    $.ajax({
      url: 'https://restcountries.com/v3.1/subregion/north',
      success: function(data){
        $country = $('#north')
        $number = $('#NA')
        let num = 0;
        $.each(data, function(i, item){
          if ( item.region === 'Africa' ) { 
            $country.append('<li class="country">'+ item.name.common +'</li>')
          num += 1;
          }
        });

        $number.prepend(`${num} Countries`);
        $('.country').click(clicked);
      },
      // error: alert('Hey, There was an error. Check the URL and try again')
    });
    $.ajax({
      url: 'https://restcountries.com/v3.1/subregion/middle',
      success: function(data){
        $country = $('#central')
        $number = $('#CA')
        let num = 0;
        $.each(data, function(i, item){
          if ( item.region === 'Africa' ) { 
            $country.append('<li class="country">'+ item.name.common +'</li>')
            num += 1
          }
        });

        $number.prepend(`${num} Countries`);
        $('.country').click(clicked);
      },
      // error: alert('Hey, There was an error. Check the URL and try again')
    });
    $.ajax({
      url: 'https://restcountries.com/v3.1/subregion/east',
      success: function(data){
        $country = $('#east')
        $number = $('#EA')
        let num = 0;
        $.each(data, function(i, item){
          if ( item.region === 'Africa' ) { 
            $country.append('<li class="country">'+ item.name.common +'</li>')
            num += 1;
          }
        });
        $number.prepend(`${num} Countries`);
        $('.country').click(clicked);
      },
      // error: alert('Hey, There was an error. Check the URL and try again')
    });
  });

  //////////////////////////// Counting The Page Visits///////////////////////////////

  function visits() {
    $count = $(".counter");
    console.log($count.text());
    $views = localStorage.getItem("page_view");
    if ($views) {
    $views = Number($views) + 1;
    localStorage.setItem("page_view", $views);
    } else {
      $views = 1;
      localStorage.setItem("page_view", 1);
    }
    $message = `Number Of Visits(Since March 2022): ${$views}`;
    $count.html($message);
  }
  visits();
////////////////////////////// CLick handler//////////////////////////////////////////////

  function clicked(){
    $name = $(this).text().toLowerCase().split(" ")[0];
    $.ajax({
      url: `https://restcountries.com/v3.1/name/${$name}`,
      success: function(data) {
        data[0].flag = `<img src="https://flagcdn.com/h40/${data[0].cca2.toLowerCase()}.png"/>`
        data = data[0];
        countryName = data.name.common.toUpperCase();
        $('#title').html(''+countryName+' '+ data.flag +'');
        $('.data').html("Official Name: <u>"+data.name.official+"</u> | Population: <u>"+data.population+"</u> | Region: <u>"+data.subregion+
        "</u><br> Curency: <u>"+data.currencies+"</u> | Languages: <u>"+data.languages[0]+"</u>")
        return false;
      }
    });
  }
</script>

</html>
